<!-- 
<div class="buyer-container">
  <h2 class="title">Filter Auctions</h2>

  <div class="filter-section">
    <input type="text" placeholder="Category" [(ngModel)]="filterData.category" />
    <input type="number" placeholder="Min Bid" [(ngModel)]="filterData.minBid" />
    <input type="number" placeholder="Max Bid" [(ngModel)]="filterData.maxBid" />
    <input type="number" placeholder="Time Left (hrs)" [(ngModel)]="filterData.timeLeftInHours" />
    <button (click)="applyFilters()">Apply Filter</button>
    <button (click)="resetFilter()">↩ Back</button>
  </div>

  <div *ngIf="noAuctionsFound()" class="modal">
    <div class="modal-content">
      <p>No auctions available with selected filters. Try another.</p>
      <button (click)="resetFilter()">Back</button>
    </div>
  </div>

  <div *ngIf="showProductDetails() && selectedProduct()">
    <h3>Product Details</h3>
    <p><strong>Title:</strong> {{ selectedProduct()?.title }}</p>
    <p><strong>Description:</strong> {{ selectedProduct()?.description }}</p>
    <p><strong>Category:</strong> {{ selectedProduct()?.category }}</p>
    <p><strong>Start Price:</strong> ₹{{ selectedProduct()?.startPrice }}</p>
    <button (click)="backToList()">↩ Back</button>
  </div>

  <div *ngIf="!showProductDetails()">
    <h2>Auctions</h2>
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Start</th>
          <th>End</th>
          <th>Bid</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let auction of filteredAuctions()" [ngClass]="getAuctionStatus(auction)">
          <td>{{ auction.title }}</td>
          <td>{{ auction.startDate | date:'short' }}</td>
          <td>{{ auction.endDate | date:'short' }}</td>
          <td>₹{{ auction.currentBid }}</td>
          <td>{{ getAuctionStatus(auction) }}</td>
          <td>
            <button 
              *ngIf="getAuctionStatus(auction) !== 'completed' || winnerAuctions().includes(auction.auctionId)" 
              (click)="viewProduct(auction.productId)">
              View Product
            </button>
            <button *ngIf="getAuctionStatus(auction) === 'live'" (click)="bidNow(auction.auctionId)">Bid Now</button>
            <button *ngIf="getAuctionStatus(auction) === 'completed' && winnerAuctions().includes(auction.auctionId)" 
                    (click)="goToPayment(auction.auctionId)">Make Payment
            </button>

          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div> -->

<div class="container my-5 buyer-container">
  <h2 class="mb-4">Filter Auctions</h2>
 
  <div class="row g-3 filter-section mb-4">
    <div class="col-md-3">
      <input type="text" class="form-control" placeholder="Category" [(ngModel)]="filterData.category" />
    </div>
    <div class="col-md-2">
      <input type="number" class="form-control" placeholder="Min Bid" [(ngModel)]="filterData.minBid" />
    </div>
    <div class="col-md-2">
      <input type="number" class="form-control" placeholder="Max Bid" [(ngModel)]="filterData.maxBid" />
    </div>
    <div class="col-md-3">
      <input type="number" class="form-control" placeholder="Time Left (hrs)" [(ngModel)]="filterData.timeLeftInHours" />
    </div>
    <div class="col-md-2 d-flex gap-2">
      <button class="btn btn-primary w-100" (click)="applyFilters()">Apply Filter</button>
      <button class="btn btn-secondary w-100" (click)="resetFilter()">↩ Back</button>
    </div>
  </div>
 
  <div *ngIf="noAuctionsFound()" class="alert alert-warning text-center">
    <p>No auctions available with selected filters. Try another.</p>
    <button class="btn btn-outline-secondary mt-2" (click)="resetFilter()">Back</button>
  </div>
 
  <div *ngIf="showProductDetails() && selectedProduct()" class="card p-4 mb-4">
    <h3 class="card-title">Product Details</h3>
    <p><strong>Title:</strong> {{ selectedProduct()?.title }}</p>
    <p><strong>Description:</strong> {{ selectedProduct()?.description }}</p>
    <p><strong>Category:</strong> {{ selectedProduct()?.category }}</p>
    <p><strong>Start Price:</strong> ₹{{ selectedProduct()?.startPrice }}</p>
    <button class="btn btn-outline-primary mt-2" (click)="backToList()">↩ Back</button>
  </div>
 
  <div *ngIf="!showProductDetails()">
    <h2 class="mb-3">Auctions</h2>
    <div class="table-responsive">
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-dark">
          <tr>
            <th>Title</th>
            <th>Start</th>
            <th>End</th>
            <th>Bid</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let auction of filteredAuctions()" [ngClass]="getAuctionStatus(auction)">
            <td>{{ auction.title }}</td>
            <td>{{ auction.startDate | date:'short' }}</td>
            <td>{{ auction.endDate | date:'short' }}</td>
            <td>₹{{ auction.currentBid }}</td>
            <td>{{ getAuctionStatus(auction) }}</td>
            <td>
              <div class="d-flex flex-wrap gap-2">
                <button
                  *ngIf="getAuctionStatus(auction) !== 'completed' || winnerAuctions().includes(auction.auctionId)"
                  class="btn btn-info btn-sm"
                  (click)="viewProduct(auction.productId)">
                  View Product
                </button>
                <button
                  *ngIf="getAuctionStatus(auction) === 'live'"
                  class="btn btn-success btn-sm"
                  (click)="bidNow(auction.auctionId)">
                  Bid Now
                </button>
                <button
                  *ngIf="getAuctionStatus(auction) === 'completed' && winnerAuctions().includes(auction.auctionId)"
                  class="btn btn-warning btn-sm"
                  (click)="goToPayment(auction.auctionId)">
                  Make Payment
                </button>
                <button
                  *ngIf="getAuctionStatus(auction) === 'completed' && winnerAuctions().includes(auction.auctionId)"
                   class="btn btn-outline-dark btn-sm"
                   (click)="goToReview(auction.auctionId)">
                   Add Review
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
 
 
