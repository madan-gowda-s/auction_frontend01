<!-- 
<div class="buyer-container">
  <h2 class="title">Filter Auctions</h2>

  <div class="filter-section">
    <input type="text" placeholder="Category" [(ngModel)]="filterData.category" />
    <input type="number" placeholder="Min Bid" [(ngModel)]="filterData.minBid" />
    <input type="number" placeholder="Max Bid" [(ngModel)]="filterData.maxBid" />
    <input type="number" placeholder="Time Left (hrs)" [(ngModel)]="filterData.timeLeftInHours" />
    <button (click)="applyFilters()">Apply Filter</button>
    <button (click)="resetFilter()">↩ Back</button>
  </div>

  <div *ngIf="noAuctionsFound()" class="modal">
    <div class="modal-content">
      <p>No auctions available with selected filters. Try another.</p>
      <button (click)="resetFilter()">Back</button>
    </div>
  </div>

  <div *ngIf="showProductDetails() && selectedProduct()">
    <h3>Product Details</h3>
    <p><strong>Title:</strong> {{ selectedProduct()?.title }}</p>
    <p><strong>Description:</strong> {{ selectedProduct()?.description }}</p>
    <p><strong>Category:</strong> {{ selectedProduct()?.category }}</p>
    <p><strong>Start Price:</strong> ₹{{ selectedProduct()?.startPrice }}</p>
    <button (click)="backToList()">↩ Back</button>
  </div>

  <div *ngIf="!showProductDetails()">
    <h2>Auctions</h2>
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Start</th>
          <th>End</th>
          <th>Bid</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let auction of filteredAuctions()" [ngClass]="getAuctionStatus(auction)">
          <td>{{ auction.title }}</td>
          <td>{{ auction.startDate | date:'short' }}</td>
          <td>{{ auction.endDate | date:'short' }}</td>
          <td>₹{{ auction.currentBid }}</td>
          <td>{{ getAuctionStatus(auction) }}</td>
          <td>
            <button 
              *ngIf="getAuctionStatus(auction) !== 'completed' || winnerAuctions().includes(auction.auctionId)" 
              (click)="viewProduct(auction.productId)">
              View Product
            </button>
            <button *ngIf="getAuctionStatus(auction) === 'live'" (click)="bidNow(auction.auctionId)">Bid Now</button>
            <button *ngIf="getAuctionStatus(auction) === 'completed' && winnerAuctions().includes(auction.auctionId)" 
                    (click)="goToPayment(auction.auctionId)">Make Payment
            </button>

          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div> -->

<div class="container my-5 buyer-container">
  <h2 class="mb-4">Filter Auctions</h2>
 
  <div class="table-responsive mb-4">
    <table class="table table-bordered align-middle">
      <thead class="table-dark">
        <tr>
          <th>Category</th>
          <th>Min Bid</th>
          <th>Max Bid</th>
          <th>Time Left (hrs)</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <select class="form-select" [(ngModel)]="filterData.category">
              <option value="">Select a category</option>
              <option value="Electronics">Electronics</option>
              <option value="Fashion">Fashion</option>
              <option value="Home & Garden">Home & Garden</option>
              <option value="Collectibles">Collectibles</option>
              <option value="Sports & Outdoors">Sports & Outdoors</option>
              <option value="Books">Books</option>
              <option value="Vehicles">Vehicles</option>
              <option value="Art">Art</option>
              <option value="Other">Other</option>
            </select>
          </td>
          <td>
            <input type="number" class="form-control" placeholder="Min Bid" [(ngModel)]="filterData.minBid" />
          </td>
          <td>
            <input type="number" class="form-control" placeholder="Max Bid" [(ngModel)]="filterData.maxBid" />
          </td>
          <td>
            <input type="number" class="form-control" placeholder="Time Left (hrs)" [(ngModel)]="filterData.timeLeftInHours" />
          </td>
          <td class="d-flex gap-2">
            <button class="btn btn-secondary" (click)="applyFilters()">Apply Filter</button>
            <button class="btn btn-secondary" (click)="resetFilter()">Back</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
 
  <div *ngIf="noAuctionsFound()" class="alert alert-warning text-center">
    <p>No auctions available with selected filters. Try another.</p>
    <button class="btn btn-outline-secondary mt-2" (click)="resetFilter()">Back</button>
  </div>
  <div *ngIf="showProductDetails() && selectedProduct()" class="container my-4">
    <h3 class="mb-3 text-primary">Product Details</h3>
    <div class="table-responsive mb-3">
      <table class="table table-bordered align-middle">
        <thead class="table-dark">
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Category</th>
            <th>Start Price</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ selectedProduct()?.title }}</td>
            <td>{{ selectedProduct()?.description }}</td>
            <td>{{ selectedProduct()?.category }}</td>
            <td>₹{{ selectedProduct()?.startPrice }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <button class="btn btn-outline-secondary" (click)="backToList()">Back</button>
  </div>
  
  
  <div *ngIf="!showProductDetails()" class="container my-4">
    <h2 class="mb-3 text-primary">Auctions</h2>
    <div class="table-responsive">
      <table class="table table-bordered align-middle product-details-table">
        <thead class="table-dark">
          <tr>
            <th>Title</th>
            <th>Start</th>
            <th>End</th>
            <th>Bid</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let auction of filteredAuctions()" [ngClass]="getAuctionStatus(auction)">
            <td>{{ auction.title }}</td>
            <td>{{ auction.startDate | date:'short' }}</td>
            <td>{{ auction.endDate | date:'short' }}</td>
            <td>₹{{ auction.currentBid }}</td>
            <td>{{ getAuctionStatus(auction) }}</td>
            <td>
              <div class="d-flex flex-wrap gap-2">
                <button
                  *ngIf="getAuctionStatus(auction) !== 'completed' || winnerAuctions().includes(auction.auctionId)"
                  class="btn btn-info btn-sm"
                  (click)="viewProduct(auction.productId)">
                  View Product
                </button>
                <button
                  *ngIf="getAuctionStatus(auction) === 'live'"
                  class="btn btn-success btn-sm"
                  (click)="bidNow(auction.auctionId)">
                  Bid Now
                </button>
                <button
                  *ngIf="getAuctionStatus(auction) === 'completed' && winnerAuctions().includes(auction.auctionId)"
                  class="btn btn-warning btn-sm"
                  (click)="goToPayment(auction.auctionId)">
                  Make Payment
                </button>
                <button
                  *ngIf="getAuctionStatus(auction) === 'completed' && winnerAuctions().includes(auction.auctionId)"
                  class="btn btn-outline-dark btn-sm"
                  (click)="goToReview(auction.auctionId)">
                  Add Review
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  